---
/**
 * admin/criar-tema/index.astro
 *
 * P√°gina do Wizard de Cria√ß√£o de Temas CNX.
 * Permite ao usu√°rio preencher um formul√°rio guiado em 6 etapas
 * e gerar um prompt √∫nico para o Cursor Agent criar o tema completo,
 * incluindo setup do reposit√≥rio, gera√ß√£o dos arquivos e deploy na Vercel.
 *
 * Etapas:
 *   1. Reposit√≥rio GitHub
 *   2. Identidade da Marca
 *   3. NAP & Contato (SEO local)
 *   4. SEO & Open Graph
 *   5. Conte√∫do Inicial das P√°ginas
 *   6. Design & Estrutura do Site
 */

import AdminLayout from '../../../layouts/AdminLayout.astro';
import ThemeWizard from '../../../components/admin/ThemeWizard.tsx';
import { verifySession, SESSION_COOKIE } from '../../../utils/auth-utils';

const token       = Astro.cookies.get(SESSION_COOKIE)?.value;
const sessionUser = token ? verifySession(token) : null;
if (!sessionUser) return Astro.redirect('/admin/login');
---

<AdminLayout title="Criar Tema ‚Äî CNX Agency Admin">
    <div style="padding: 2rem 1.5rem 0; max-width: 900px;">
        <!-- Cabe√ßalho -->
        <div style="margin-bottom: 0.5rem;">
            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.375rem;">
                <span style="font-size: 1.5rem;">üé®</span>
                <h1 style="font-size: 1.5rem; font-weight: 700; color: var(--admin-text); margin: 0;">
                    Criar Tema com IA
                </h1>
            </div>
            <p style="color: var(--admin-text-muted); font-size: 0.9rem; margin: 0;">
                Preencha o formul√°rio e gere um prompt pronto para colar no Cursor Agent ‚Äî
                ele cria, configura e faz deploy do seu tema automaticamente.
            </p>
        </div>

        <!-- Divider -->
        <div style="height: 1px; background: var(--admin-border); margin: 1.25rem 0;"></div>
    </div>

    <!-- Wizard (React, client-only) -->
    <ThemeWizard client:only="react" />
</AdminLayout>
